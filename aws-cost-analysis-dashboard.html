<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>잇자 플랫폼 - AWS 분기별 비용 분석</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f7fa;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1em;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 2.2em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #7f8c8d;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .assumptions {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }

        .assumptions h3 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .assumptions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .assumption-category {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .assumption-category h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .assumption-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .assumption-item span:first-child {
            color: #555;
        }

        .assumption-item span:last-child {
            color: #27ae60;
            font-weight: 600;
        }

        #toggleDetails:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>잇자 플랫폼 - AWS 비용 분석</h1>
            <div style="text-align: left; max-width: 600px; margin: 0 auto;">
                <ul
                    style="font-size: 1.1em; color: #7f8c8d; line-height: 1.8; list-style-type: disc; padding-left: 20px;">
                    <li><strong>기간:</strong> 2025년 9월 - 2028년 8월 (36개월)</li>
                    <li><strong>성장:</strong> 일일 방문자 100명 → 1,000명</li>
                    <li><strong>전환율:</strong> 방문자의 15%가 실제 서비스 이용</li>
                    <li><strong>사용 패턴:</strong> 사용자당 평균 7.5개 토지 분석 리포트</li>
                </ul>
            </div>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value">$13,680</div>
                <div class="metric-label">3년 총 비용</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">1,000</div>
                <div class="metric-label">최대 일일 방문자</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">1,125</div>
                <div class="metric-label">최대 일일 AI 리포트</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">81M</div>
                <div class="metric-label">3년 총 AI 토큰</div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">서비스 카테고리별 분기 비용 분석 (2025-2028)</div>
                <canvas id="quarterlyCostChart"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-title">3년간 분기별 사용자 증가 vs 비용 확장</div>
                <canvas id="growthChart"></canvas>
            </div>

            <div class="chart-container full-width">
                <div class="chart-title">AWS 서비스 카테고리별 분기 비용 상세 분석</div>
                <canvas id="monthlyBreakdownChart"></canvas>
            </div>
        </div>

        <div class="assumptions">
            <h3>비용 계산 가정사항</h3>

            <!-- Cost Summary Section -->
            <div class="assumption-category" style="margin-bottom: 30px; border-left: 4px solid #e74c3c;">
                <h4>월간 기본 비용 총계</h4>
                <div class="assumption-item" style="font-size: 1.1em; font-weight: bold;">
                    <span>컴퓨팅 & 호스팅</span>
                    <span>$186/월</span>
                </div>
                <div class="assumption-item" style="font-size: 1.1em; font-weight: bold;">
                    <span>데이터베이스 & 저장소</span>
                    <span>$36/월</span>
                </div>
                <div class="assumption-item" style="font-size: 1.1em; font-weight: bold;">
                    <span>보안 서비스</span>
                    <span>$8/월</span>
                </div>
                <div class="assumption-item" style="font-size: 1.1em; font-weight: bold;">
                    <span>AI 서비스 (기본)</span>
                    <span>$26/월</span>
                </div>
                <div class="assumption-item"
                    style="font-size: 1.2em; font-weight: bold; color: #2c3e50; border-top: 2px solid #bdc3c7; padding-top: 10px; margin-top: 10px;">
                    <span>총 기본 비용</span>
                    <span>$256/월</span>
                </div>
            </div>

            <!-- Expand/Collapse Button -->
            <div style="text-align: center; margin: 20px 0;">
                <button id="toggleDetails" onclick="toggleCostDetails()"
                    style="background: #3498db; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 1em; transition: background 0.3s;">
                    <span id="toggleIcon">▼</span> 상세 비용 분석 보기
                </button>
            </div>

            <div id="detailedBreakdown" class="assumptions-grid" style="display: none;">
                <div class="assumption-category">
                    <h4>컴퓨팅 & 호스팅</h4>
                    <div class="assumption-item">
                        <span>EKS 클러스터 관리</span>
                        <span>$72/월</span>
                    </div>
                    <div class="assumption-item">
                        <span>EKS 노드</span>
                        <span>$60/월</span>
                    </div>
                    <div class="assumption-item">
                        <span>로드 밸런서</span>
                        <span>$22/월</span>
                    </div>
                    <div class="assumption-item">
                        <span>VPC NAT 게이트웨이</span>
                        <span>$32/월</span>
                    </div>
                </div>

                <div class="assumption-category">
                    <h4>데이터베이스 & 저장소</h4>
                    <div class="assumption-item">
                        <span>RDS 데이터베이스</span>
                        <span>$16/월</span>
                    </div>
                    <div class="assumption-item">
                        <span>ElastiCache 캐시</span>
                        <span>$12/월</span>
                    </div>
                    <div class="assumption-item">
                        <span>S3 백업 저장소</span>
                        <span>$8/월</span>
                    </div>
                </div>

                <div class="assumption-category">
                    <h4>보안 서비스</h4>
                    <div class="assumption-item">
                        <span>GuardDuty 보안</span>
                        <span>$6/월</span>
                    </div>
                    <div class="assumption-item">
                        <span>Secrets Manager</span>
                        <span>$2/월</span>
                    </div>
                </div>

                <div class="assumption-category">
                    <h4>AI 서비스</h4>
                    <div class="assumption-item">
                        <span>OpenSearch 검색엔진</span>
                        <span>$26/월</span>
                    </div>
                    <div class="assumption-item">
                        <span>Bedrock AI 모델</span>
                        <span>$0.036/리포트</span>
                    </div>
                    <div class="assumption-item">
                        <span>리포트당 토큰</span>
                        <span>2,000개</span>
                    </div>
                    <div class="assumption-item">
                        <span>서비스 전환율</span>
                        <span>방문자의 15%</span>
                    </div>
                    <div class="assumption-item">
                        <span>사용자당 리포트</span>
                        <span>평균 7.5개</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        // Data for charts (3-year scope: Sep 2025 - Aug 2028)
        const quarters = ['2025년 3분기', '2025년 4분기', '2026년 1분기', '2026년 2분기', '2026년 3분기', '2026년 4분기', '2027년 1분기', '2027년 2분기', '2027년 3분기', '2027년 4분기', '2028년 1분기', '2028년 2분기'];
        const months = [
            '2025년 9월', '2025년 10월', '2025년 11월', '2025년 12월',
            '2026년 1월', '2026년 2월', '2026년 3월', '2026년 4월', '2026년 5월', '2026년 6월', '2026년 7월', '2026년 8월',
            '2026년 9월', '2026년 10월', '2026년 11월', '2026년 12월',
            '2027년 1월', '2027년 2월', '2027년 3월', '2027년 4월', '2027년 5월', '2027년 6월', '2027년 7월', '2027년 8월',
            '2027년 9월', '2027년 10월', '2027년 11월', '2027년 12월',
            '2028년 1월', '2028년 2월', '2028년 3월', '2028년 4월', '2028년 5월', '2028년 6월', '2028년 7월', '2028년 8월'
        ];

        // User growth data (B2B focused: 100 to 1,000 daily visitors over 36 months)
        const dailyUsers = [
            // Year 1: 100-400 (25 per month growth)
            100, 125, 150, 175, 200, 225, 250, 275, 300, 325, 350, 400,
            // Year 2: 400-700 (25 per month growth)
            425, 450, 475, 500, 525, 550, 575, 600, 625, 650, 675, 700,
            // Year 3: 700-1000 (25 per month growth)
            725, 750, 775, 800, 825, 850, 875, 900, 925, 950, 975, 1000
        ];
        // 15% conversion rate, 5-10 reports per user (average 7.5)
        const aiReports = dailyUsers.map(users => Math.round(users * 0.15 * 7.5));

        // Cost calculations
        const baseCosts = {
            compute: 186, // EKS + LB + VPC
            database: 36, // RDS + ElastiCache + S3
            security: 8,  // GuardDuty + Secrets Manager
            ai: 26        // OpenSearch base
        };

        // Calculate monthly costs with progressive scaling over 3 years (up to 1,000 users)
        const monthlyCosts = months.map((month, index) => {
            const users = dailyUsers[index];
            const reports = aiReports[index];
            const aiTokenCost = reports * 30 * 0.036; // daily reports * days * cost per report (2000 tokens)

            // Progressive scaling based on user count
            let computeScaling = 0;
            let databaseScaling = 0;

            if (users > 300) computeScaling += 30;  // First scaling tier
            if (users > 500) computeScaling += 60;  // Second scaling tier  
            if (users > 750) computeScaling += 90;  // Third scaling tier

            if (users > 400) databaseScaling += 12; // Database scaling
            if (users > 700) databaseScaling += 20; // Additional database scaling

            return {
                compute: baseCosts.compute + computeScaling,
                database: baseCosts.database + databaseScaling,
                security: baseCosts.security,
                ai: baseCosts.ai + aiTokenCost
            };
        });

        // Quarterly aggregation (12 quarters for 3 years)
        const quarterlyCosts = [];
        for (let i = 0; i < 12; i++) {
            const startMonth = i * 3;
            quarterlyCosts.push({
                compute: monthlyCosts[startMonth].compute + monthlyCosts[startMonth + 1].compute + monthlyCosts[startMonth + 2].compute,
                database: monthlyCosts[startMonth].database + monthlyCosts[startMonth + 1].database + monthlyCosts[startMonth + 2].database,
                security: monthlyCosts[startMonth].security + monthlyCosts[startMonth + 1].security + monthlyCosts[startMonth + 2].security,
                ai: monthlyCosts[startMonth].ai + monthlyCosts[startMonth + 1].ai + monthlyCosts[startMonth + 2].ai
            });
        }

        // Chart 1: Quarterly Cost Breakdown
        const ctx1 = document.getElementById('quarterlyCostChart').getContext('2d');
        new Chart(ctx1, {
            type: 'bar',
            data: {
                labels: quarters,
                datasets: [
                    {
                        label: '컴퓨팅 & 호스팅',
                        data: quarterlyCosts.map(q => q.compute),
                        backgroundColor: '#3498db',
                        borderColor: '#2980b9',
                        borderWidth: 1
                    },
                    {
                        label: '데이터베이스 & 저장소',
                        data: quarterlyCosts.map(q => q.database),
                        backgroundColor: '#2ecc71',
                        borderColor: '#27ae60',
                        borderWidth: 1
                    },
                    {
                        label: '보안',
                        data: quarterlyCosts.map(q => q.security),
                        backgroundColor: '#e74c3c',
                        borderColor: '#c0392b',
                        borderWidth: 1
                    },
                    {
                        label: 'AI 서비스',
                        data: quarterlyCosts.map(q => q.ai),
                        backgroundColor: '#f39c12',
                        borderColor: '#e67e22',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        stacked: true
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        ticks: {
                            callback: function (value) {
                                return '$' + value;
                            }
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.dataset.label + ': $' + context.parsed.y.toFixed(0);
                            }
                        }
                    }
                }
            }
        });

        // Chart 2: User Growth vs Cost (Quarterly)
        const ctx2 = document.getElementById('growthChart').getContext('2d');
        const totalQuarterlyCosts = quarterlyCosts.map(cost => cost.compute + cost.database + cost.security + cost.ai);
        // Calculate quarterly usage (average daily users per quarter * 90 days)
        const quarterlyUsers = [];
        for (let i = 0; i < 12; i++) {
            const startMonth = i * 3;
            const avgDailyUsers = (dailyUsers[startMonth] + dailyUsers[startMonth + 1] + dailyUsers[startMonth + 2]) / 3;
            quarterlyUsers.push(Math.round(avgDailyUsers * 90));
        }

        new Chart(ctx2, {
            type: 'line',
            data: {
                labels: quarters,
                datasets: [
                    {
                        label: '분기별 사용자',
                        data: quarterlyUsers,
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderWidth: 3,
                        pointBackgroundColor: '#3498db',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        yAxisID: 'y',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: '분기별 비용 ($)',
                        data: totalQuarterlyCosts,
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.2)',
                        borderWidth: 3,
                        pointBackgroundColor: '#e74c3c',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        yAxisID: 'y1',
                        tension: 0.4,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: '분기별 사용자',
                            color: '#3498db',
                            font: {
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        max: 100000,
                        ticks: {
                            color: '#3498db',
                            callback: function (value) {
                                return (value / 1000).toFixed(0) + 'K';
                            }
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: '분기별 비용 ($)',
                            color: '#e74c3c',
                            font: {
                                weight: 'bold'
                            }
                        },
                        beginAtZero: false,
                        grid: {
                            drawOnChartArea: false,
                        },
                        ticks: {
                            color: '#e74c3c',
                            callback: function (value) {
                                return '$' + value;
                            }
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                if (context.datasetIndex === 0) {
                                    return '분기별 사용자: ' + context.parsed.y.toLocaleString() + '명';
                                } else {
                                    return '분기별 비용: $' + context.parsed.y.toFixed(0);
                                }
                            }
                        }
                    }
                }
            }
        });

        // Chart 3: Quarterly Breakdown
        const ctx3 = document.getElementById('monthlyBreakdownChart').getContext('2d');
        new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: quarters,
                datasets: [
                    {
                        label: '컴퓨팅 & 호스팅',
                        data: quarterlyCosts.map(cost => cost.compute),
                        backgroundColor: '#3498db'
                    },
                    {
                        label: '데이터베이스 & 저장소',
                        data: quarterlyCosts.map(cost => cost.database),
                        backgroundColor: '#2ecc71'
                    },
                    {
                        label: '보안',
                        data: quarterlyCosts.map(cost => cost.security),
                        backgroundColor: '#e74c3c'
                    },
                    {
                        label: 'AI 서비스',
                        data: quarterlyCosts.map(cost => cost.ai),
                        backgroundColor: '#f39c12'
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        stacked: true
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        ticks: {
                            callback: function (value) {
                                return '$' + value;
                            }
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.dataset.label + ': $' + context.parsed.y.toFixed(0);
                            }
                        }
                    }
                }
            }
        });

        // Toggle function for detailed cost breakdown
        function toggleCostDetails() {
            const detailsDiv = document.getElementById('detailedBreakdown');
            const toggleBtn = document.getElementById('toggleDetails');
            const toggleIcon = document.getElementById('toggleIcon');

            if (detailsDiv.style.display === 'none') {
                detailsDiv.style.display = 'grid';
                toggleBtn.innerHTML = '<span id="toggleIcon">▲</span> 상세 비용 분석 숨기기';
                toggleBtn.style.background = '#e74c3c';
            } else {
                detailsDiv.style.display = 'none';
                toggleBtn.innerHTML = '<span id="toggleIcon">▼</span> 상세 비용 분석 보기';
                toggleBtn.style.background = '#3498db';
            }
        }
    </script>
</body>

</html>